{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///E:/Todo%20Full-Stack%20Web%20Application/frontend/src/contexts/AuthContext.js"],"sourcesContent":["// frontend/src/contexts/AuthContext.js\nimport { createContext, useContext, useState, useEffect } from 'react';\nimport { useRouter } from 'next/router';\n\nconst AuthContext = createContext(undefined);\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\nexport const AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const router = useRouter();\n\n  useEffect(() => {\n    const storedToken = localStorage.getItem('authToken');\n    const storedUser = localStorage.getItem('user');\n    if (storedToken && storedUser) {\n      setToken(storedToken);\n      setUser(JSON.parse(storedUser));\n    }\n    setLoading(false);\n  }, []);\n\n  const login = async (email, password) => {\n    try {\n      const apiUrl = process.env.NEXT_PUBLIC_API_BASE_URL || 'http://127.0.0.1:8000/api';\n      console.log(`Making login request to: ${apiUrl}/auth/login`);\n\n      const response = await fetch(`${apiUrl}/auth/login`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email, password }),\n      });\n\n      console.log(`Login response status: ${response.status}`);\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        console.error('Login error response:', errorData);\n        throw new Error(errorData.detail || `Login failed with status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      setToken(data.access_token);\n      localStorage.setItem('authToken', data.access_token);\n      if (data.refresh_token) {\n        localStorage.setItem('refreshToken', data.refresh_token);\n      }\n      setUser({ email });\n      localStorage.setItem('user', JSON.stringify({ email }));\n      router.push('/dashboard');\n    } catch (error) {\n      console.error('Login error:', error);\n      throw new Error(error.message || 'An error occurred during login');\n    }\n  };\n\n  const register = async (email, password) => {\n    try {\n      const apiUrl = process.env.NEXT_PUBLIC_API_BASE_URL || 'http://127.0.0.1:8000/api';\n      console.log(`Making register request to: ${apiUrl}/auth/register`);\n\n      const response = await fetch(`${apiUrl}/auth/register`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email, password }),\n      });\n\n      console.log(`Register response status: ${response.status}`);\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        console.error('Registration error response:', errorData);\n        throw new Error(errorData.detail || `Registration failed with status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      setToken(data.access_token);\n      localStorage.setItem('authToken', data.access_token);\n      setUser({ email });\n      localStorage.setItem('user', JSON.stringify({ email }));\n      router.push('/dashboard');\n    } catch (error) {\n      console.error('Registration error:', error);\n      throw new Error(error.message || 'An error occurred during registration');\n    }\n  };\n\n  const logout = () => {\n    setToken(null);\n    setUser(null);\n    localStorage.removeItem('authToken');\n    localStorage.removeItem('refreshToken');\n    localStorage.removeItem('user');\n    router.push('/login');\n  };\n\n  const refreshToken = async () => {\n    try {\n      const refreshToken = localStorage.getItem('refreshToken');\n      if (!refreshToken) return false;\n\n      const apiUrl = process.env.NEXT_PUBLIC_API_BASE_URL || 'http://127.0.0.1:8000/api';\n      const response = await fetch(`${apiUrl}/auth/refresh`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ refresh_token: refreshToken }),\n      });\n\n      if (!response.ok) throw new Error(`Failed to refresh token: ${response.status}`);\n\n      const data = await response.json();\n      setToken(data.access_token);\n      localStorage.setItem('authToken', data.access_token);\n      return true;\n    } catch (error) {\n      console.error('Token refresh error:', error);\n      logout();\n      return false;\n    }\n  };\n\n  const value = { user, token, loading, login, logout, register, refreshToken };\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 215, "column": 0}, "map": {"version":3,"sources":["file:///E:/Todo%20Full-Stack%20Web%20Application/frontend/src/pages/_app.js"],"sourcesContent":["import { AuthProvider } from '../contexts/AuthContext';\nimport '../styles/globals.css';\n\n// This default export is required in a file named _app.js\nexport default function App({ Component, pageProps }) {\n  return (\n    <AuthProvider>\n      <Component {...pageProps} />\n    </AuthProvider>\n  );\n}"],"names":[],"mappings":";;;;;AAAA;;;;AAIe,SAAS,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE;IAClD,qBACE,qKAAC,uIAAY;kBACX,cAAA,qKAAC;YAAW,GAAG,SAAS;;;;;;;;;;;AAG9B"}}]
}